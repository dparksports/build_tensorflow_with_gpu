python model_main_tf2.py --model_dir=models/my_ssd_resnet50_v1_fpn --pipeline_config_path=models/my_ssd_resnet50_v1_fpn/pipeline.config --checkpoint_dir=models/my_ssd_resnet50_v1_fpn
2021-03-25 18:46:43.888485: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-03-25 18:46:45.229719: I tensorflow/compiler/jit/xla_cpu_device.cc:41] Not creating XLA devices, tf_xla_enable_xla_devices not set
2021-03-25 18:46:45.230248: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcuda.so.1
2021-03-25 18:46:45.265310: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.265732: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2070 Super computeCapability: 7.5
coreClock: 1.38GHz coreCount: 40 deviceMemorySize: 7.79GiB deviceMemoryBandwidth: 417.29GiB/s
2021-03-25 18:46:45.265766: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-03-25 18:46:45.267454: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-03-25 18:46:45.267504: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
2021-03-25 18:46:45.268029: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10
2021-03-25 18:46:45.268191: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10
2021-03-25 18:46:45.268738: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10
2021-03-25 18:46:45.269210: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.11
2021-03-25 18:46:45.269334: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-03-25 18:46:45.269413: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.269914: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.270393: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0
WARNING:tensorflow:Forced number of epochs for all eval validations to be 1.
W0325 18:46:45.273270 140259685189440 model_lib_v2.py:1049] Forced number of epochs for all eval validations to be 1.
INFO:tensorflow:Maybe overwriting sample_1_of_n_eval_examples: None
I0325 18:46:45.273411 140259685189440 config_util.py:552] Maybe overwriting sample_1_of_n_eval_examples: None
INFO:tensorflow:Maybe overwriting use_bfloat16: False
I0325 18:46:45.273454 140259685189440 config_util.py:552] Maybe overwriting use_bfloat16: False
INFO:tensorflow:Maybe overwriting eval_num_epochs: 1
I0325 18:46:45.273495 140259685189440 config_util.py:552] Maybe overwriting eval_num_epochs: 1
WARNING:tensorflow:Expected number of evaluation epochs is 1, but instead encountered `eval_on_train_input_config.num_epochs` = 0. Overwriting `num_epochs` to 1.
W0325 18:46:45.273551 140259685189440 model_lib_v2.py:1067] Expected number of evaluation epochs is 1, but instead encountered `eval_on_train_input_config.num_epochs` = 0. Overwriting `num_epochs` to 1.
2021-03-25 18:46:45.277730: I tensorflow/core/platform/cpu_feature_guard.cc:142] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
2021-03-25 18:46:45.278207: I tensorflow/compiler/jit/xla_gpu_device.cc:99] Not creating XLA devices, tf_xla_enable_xla_devices not set
2021-03-25 18:46:45.278376: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.278956: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: 
pciBusID: 0000:01:00.0 name: GeForce RTX 2070 Super computeCapability: 7.5
coreClock: 1.38GHz coreCount: 40 deviceMemorySize: 7.79GiB deviceMemoryBandwidth: 417.29GiB/s
2021-03-25 18:46:45.278990: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-03-25 18:46:45.279017: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-03-25 18:46:45.279045: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
2021-03-25 18:46:45.279059: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10
2021-03-25 18:46:45.279072: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10
2021-03-25 18:46:45.279085: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10
2021-03-25 18:46:45.279098: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.11
2021-03-25 18:46:45.279110: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-03-25 18:46:45.279155: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.279602: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.280007: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0
2021-03-25 18:46:45.280024: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-03-25 18:46:45.612769: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1261] Device interconnect StreamExecutor with strength 1 edge matrix:
2021-03-25 18:46:45.612792: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1267]      0 
2021-03-25 18:46:45.612796: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1280] 0:   N 
2021-03-25 18:46:45.613016: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.613402: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.613744: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-03-25 18:46:45.614111: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1406] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7003 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2070 Super, pci bus id: 0000:01:00.0, compute capability: 7.5)
2021-03-25 18:46:46.154744: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-03-25 18:46:47.094948: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-03-25 18:46:47.334417: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
2021-03-25 18:46:47.544774: I tensorflow/stream_executor/cuda/cuda_driver.cc:789] failed to allocate 3.59G (3853453824 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory
INFO:tensorflow:Reading unweighted datasets: ['annotations/test.record']
I0325 18:46:48.019746 140259685189440 dataset_builder.py:163] Reading unweighted datasets: ['annotations/test.record']
INFO:tensorflow:Reading record datasets for input file: ['annotations/test.record']
I0325 18:46:48.019954 140259685189440 dataset_builder.py:80] Reading record datasets for input file: ['annotations/test.record']
INFO:tensorflow:Number of filenames to read: 1
I0325 18:46:48.020084 140259685189440 dataset_builder.py:81] Number of filenames to read: 1
WARNING:tensorflow:num_readers has been reduced to 1 to match input file shards.
W0325 18:46:48.020154 140259685189440 dataset_builder.py:87] num_readers has been reduced to 1 to match input file shards.
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/builders/dataset_builder.py:101: parallel_interleave (from tensorflow.python.data.experimental.ops.interleave_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.interleave(map_func, cycle_length, block_length, num_parallel_calls=tf.data.AUTOTUNE)` instead. If sloppy execution is desired, use `tf.data.Options.experimental_deterministic`.
W0325 18:46:48.020728 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/builders/dataset_builder.py:101: parallel_interleave (from tensorflow.python.data.experimental.ops.interleave_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.interleave(map_func, cycle_length, block_length, num_parallel_calls=tf.data.AUTOTUNE)` instead. If sloppy execution is desired, use `tf.data.Options.experimental_deterministic`.
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/builders/dataset_builder.py:236: DatasetV1.map_with_legacy_function (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.map()
W0325 18:46:48.031625 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/builders/dataset_builder.py:236: DatasetV1.map_with_legacy_function (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.map()
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/tensorflow/python/util/dispatch.py:201: sparse_to_dense (from tensorflow.python.ops.sparse_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Create a `tf.sparse.SparseTensor` and use `tf.sparse.to_dense` instead.
W0325 18:46:50.087069 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/tensorflow/python/util/dispatch.py:201: sparse_to_dense (from tensorflow.python.ops.sparse_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Create a `tf.sparse.SparseTensor` and use `tf.sparse.to_dense` instead.
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/inputs.py:282: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
W0325 18:46:50.679824 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/inputs.py:282: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
INFO:tensorflow:Waiting for new checkpoint at models/my_ssd_resnet50_v1_fpn
I0325 18:46:52.227122 140259685189440 checkpoint_utils.py:139] Waiting for new checkpoint at models/my_ssd_resnet50_v1_fpn
INFO:tensorflow:Found new checkpoint at models/my_ssd_resnet50_v1_fpn/ckpt-4
I0325 18:46:52.227737 140259685189440 checkpoint_utils.py:148] Found new checkpoint at models/my_ssd_resnet50_v1_fpn/ckpt-4
/home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/tensorflow/python/keras/backend.py:434: UserWarning: `tf.keras.backend.set_learning_phase` is deprecated and will be removed after 2020-10-11. To update it, simply pass a True/False value to the `training` argument of the `__call__` method of your layer or model.
  warnings.warn('`tf.keras.backend.set_learning_phase` is deprecated and '
2021-03-25 18:46:52.879849: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:116] None of the MLIR optimization passes are enabled (registered 2)
2021-03-25 18:46:52.898187: I tensorflow/core/platform/profile_utils/cpu_utils.cc:112] CPU Frequency: 2599990000 Hz
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/eval_util.py:929: to_int64 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
W0325 18:47:03.947897 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/eval_util.py:929: to_int64 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
INFO:tensorflow:Finished eval step 0
I0325 18:47:03.951932 140259685189440 model_lib_v2.py:926] Finished eval step 0
WARNING:tensorflow:From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/utils/visualization_utils.py:617: py_func (from tensorflow.python.ops.script_ops) is deprecated and will be removed in a future version.
Instructions for updating:
tf.py_func is deprecated in TF V2. Instead, there are two
    options available in V2.
    - tf.py_function takes a python function which manipulates tf eager
    tensors instead of numpy arrays. It's easy to convert a tf eager tensor to
    an ndarray (just call tensor.numpy()) but having access to eager tensors
    means `tf.py_function`s can use accelerators such as GPUs as well as
    being differentiable using a gradient tape.
    - tf.numpy_function maintains the semantics of the deprecated tf.py_func
    (it is not differentiable, and manipulates numpy arrays). It drops the
    stateful argument making all functions stateful.
    
W0325 18:47:04.025997 140259685189440 deprecation.py:333] From /home/uv/miniconda3/envs/tf2/lib/python3.8/site-packages/object_detection/utils/visualization_utils.py:617: py_func (from tensorflow.python.ops.script_ops) is deprecated and will be removed in a future version.
Instructions for updating:
tf.py_func is deprecated in TF V2. Instead, there are two
    options available in V2.
    - tf.py_function takes a python function which manipulates tf eager
    tensors instead of numpy arrays. It's easy to convert a tf eager tensor to
    an ndarray (just call tensor.numpy()) but having access to eager tensors
    means `tf.py_function`s can use accelerators such as GPUs as well as
    being differentiable using a gradient tape.
    - tf.numpy_function maintains the semantics of the deprecated tf.py_func
    (it is not differentiable, and manipulates numpy arrays). It drops the
    stateful argument making all functions stateful.
    
INFO:tensorflow:Performing evaluation on 65 images.
I0325 18:47:06.756897 140259685189440 coco_evaluation.py:293] Performing evaluation on 65 images.
creating index...
index created!
INFO:tensorflow:Loading and preparing annotation results...
I0325 18:47:06.758293 140259685189440 coco_tools.py:116] Loading and preparing annotation results...
INFO:tensorflow:DONE (t=0.00s)
I0325 18:47:06.760276 140259685189440 coco_tools.py:138] DONE (t=0.00s)
creating index...
index created!
Running per image evaluation...
Evaluate annotation type *bbox*
DONE (t=0.35s).
Accumulating evaluation results...
DONE (t=0.17s).
 Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.577
 Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.814
 Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.729
 Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.684
 Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.626
 Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.622
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.637
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.699
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.699
 Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.715
 Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.710
 Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.727
INFO:tensorflow:Eval metrics at step 3000
I0325 18:47:07.288123 140259685189440 model_lib_v2.py:975] Eval metrics at step 3000
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP: 0.576614
I0325 18:47:07.290550 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP: 0.576614
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP@.50IOU: 0.814240
I0325 18:47:07.291356 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP@.50IOU: 0.814240
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP@.75IOU: 0.729246
I0325 18:47:07.291944 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP@.75IOU: 0.729246
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP (small): 0.684317
I0325 18:47:07.292743 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP (small): 0.684317
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP (medium): 0.625741
I0325 18:47:07.293386 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP (medium): 0.625741
INFO:tensorflow:	+ DetectionBoxes_Precision/mAP (large): 0.621876
I0325 18:47:07.294124 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Precision/mAP (large): 0.621876
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@1: 0.637272
I0325 18:47:07.294860 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@1: 0.637272
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@10: 0.699069
I0325 18:47:07.295424 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@10: 0.699069
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@100: 0.699069
I0325 18:47:07.295942 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@100: 0.699069
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@100 (small): 0.715186
I0325 18:47:07.296497 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@100 (small): 0.715186
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@100 (medium): 0.710305
I0325 18:47:07.297503 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@100 (medium): 0.710305
INFO:tensorflow:	+ DetectionBoxes_Recall/AR@100 (large): 0.726601
I0325 18:47:07.298092 140259685189440 model_lib_v2.py:978] 	+ DetectionBoxes_Recall/AR@100 (large): 0.726601
INFO:tensorflow:	+ Loss/localization_loss: 0.054485
I0325 18:47:07.298537 140259685189440 model_lib_v2.py:978] 	+ Loss/localization_loss: 0.054485
INFO:tensorflow:	+ Loss/classification_loss: 0.350581
I0325 18:47:07.298988 140259685189440 model_lib_v2.py:978] 	+ Loss/classification_loss: 0.350581
INFO:tensorflow:	+ Loss/regularization_loss: 0.202879
I0325 18:47:07.299434 140259685189440 model_lib_v2.py:978] 	+ Loss/regularization_loss: 0.202879
INFO:tensorflow:	+ Loss/total_loss: 0.607945
I0325 18:47:07.299882 140259685189440 model_lib_v2.py:978] 	+ Loss/total_loss: 0.607945